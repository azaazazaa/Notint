r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "Second-Brain-e637218bcaa741b38a91003b5ba750f4")
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers(Notion_Version = '2022-02-22', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "Second-Brain-e637218bcaa741b38a91003b5ba750f4")
content_type("application/octet-stream")
library(httr)
content_type
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers(Notion_Version = '2022-02-22', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "Second-Brain-e637218bcaa741b38a91003b5ba750f4")
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers(Notion_Version = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "Second-Brain-e637218bcaa741b38a91003b5ba750f4")
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "Second-Brain-e637218bcaa741b38a91003b5ba750f4")
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "e637218bcaa741b38a91003b5ba750f4")
DATABASE <- "e637218bcaa741b38a91003b5ba750f4" # ваш код базы данных
base_url <- "https://api.notion.com/v1/" # сслыка notion api
NOTION_TOKEN <- "Bearer secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t" # Наш скопированный токен.
DATABASE <- "e637218bcaa741b38a91003b5ba750f4" # ваш код базы данных
base_url <- "https://api.notion.com/v1/" # сслыка notion api
base_request <- request(base_url) %>%
req_headers("Notion-Version" = "2022-06-28",
"Authorization" = NOTION_TOKEN,
"Content-Type" = "application/json")
base_request <- request(base_url) %>%
req_headers("Notion-Version" = "2022-06-28",
"Authorization" = NOTION_TOKEN,
"Content-Type" = "application/json")
library(magrittr)
library(telegram.bot)
library(httr2)
NOTION_TOKEN <- "Bearer secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t" # Наш скопированный токен.
DATABASE <- "e637218bcaa741b38a91003b5ba750f4" # ваш код базы данных
base_url <- "https://api.notion.com/v1/" # сслыка notion api
base_request <- request(base_url) %>%
req_headers("Notion-Version" = "2022-06-28",
"Authorization" = NOTION_TOKEN,
"Content-Type" = "application/json")
base_request %>%
req_url_path_append("pages") %>%
req_url_path_append(DATABASE)
resp <- req_perform(req)
resp
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "e637218bcaa741b38a91003b5ba750f4")
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
accept("application/json"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "e637218bcaa741b38a91003b5ba750f4")
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "e637218bcaa741b38a91003b5ba750f4")
VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
base_request <- request(base_url) %>%
req_headers("Notion-Version" = "2022-06-28",
Authorization = NOTION_TOKEN,
"Content-Type" = "application/json")
base_request %>%
req_url_path_append("pages") %>%
req_url_path_append(DATABASE)
resp <- req_perform(req)
NOTION_TOKEN <- 'Bearer secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t' # Наш скопированный токен.
base_request <- request(base_url) %>%
req_headers("Notion-Version" = '2022-06-28',
Authorization = NOTION_TOKEN,
"Content-Type" = "application/json")
base_request %>%
req_url_path_append("pages") %>%
req_url_path_append(DATABASE)
resp <- req_perform(req)
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/json"),
accept("application/json"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "e637218bcaa741b38a91003b5ba750f4")
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"))
r <- content(response, "text")
r
}
getNotionPage("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "e637218bcaa741b38a91003b5ba750f4")
getNotionPage <- function(secret, id){
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
secret <- "secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t"
id <- "e637218bcaa741b38a91003b5ba750f4"
url <- paste0("https://api.notion.com/v1/pages/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
str(response)
response$request
resp <- req_perform(req)
base_request %>%
req_url_path_append("pages") %>%
req_url_path_append(DATABASE)
response$request
base_request <- request(base_url) %>%
req_headers("Notion-Version" = 2022-06-28,
Authorization = NOTION_TOKEN,
"Content-Type" = application/json)
"
base_request %>%
req_url_path_append("pages") %>%
resp <- req_perform(req)
base_request %>%
req_url_path_append("pages") %>%
req_url_path_append(DATABASE)
response$request
base_request <- request(base_url) %>%
req_headers(Notion-Version = '2022-06-28',
base_request %>%
req_url_path_append("pages") %>%
req_url_path_append(DATABASE)
resp <- req_perform(req)
# Отправка сообщения
bot$sendMessage(chat_id,
text = paste0("Привет *", userName, "*. _А это курсив_"),
parse_mode = "Markdown"
)
readRenviron("~/.Renviron")
getwd()
getNotionData <- function(secret, id){
url <- paste0("https://api.notion.com/v1/database/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
DATABASE_ID
DATABASE_ID <- "3f84aa11891d4cd8963dc1b577a248bb" # ваш код базы данных
DATABASE_ID <- "3f84aa11891d4cd8963dc1b577a248bb" # ваш код базы данных
url <- paste0("https://api.notion.com/v1/databases/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
getNotionData <- function(secret, id){
url <- paste0("https://api.notion.com/v1/database/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
library(httr)
getNotionData <- function(secret, id){
url <- paste0("https://api.notion.com/v1/database/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
url <- paste0("https://api.notion.com/v1/databases/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
response$request
getNotionData("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "e637218bcaa741b38a91003b5ba750f4")
url <- paste0("https://api.notion.com/v1/database/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
response$request
getwd()
getNotionData("secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t", "e637218bcaa741b38a91003b5ba750f4")
url <- paste0("https://api.notion.com/v1/database/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
response$request
response
?response
View(response)
response.content
response$content
response$date
content(response)
content(response)
?content(response)
content(response$request)
response$request
content(response$request)
response
content(response)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
response <- GET( url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', secret)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
content(response)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
content(response)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', DATABASE_ID)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
getNotionData <- function(secret, id){
url <- paste0("https://api.notion.com/v1/database/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', DATABASE_ID)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response, "text")
r
}
url <- paste0("https://api.notion.com/v1/database/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
getNotionData(NOTION_TOKEN, DATABASE_ID)
r <- content(response)
getNotionData <- function(secret, id){
url <- paste0("https://api.notion.com/v1/database/", id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', DATABASE_ID)),
content_type("application/octet-stream"),
accept("application/json"))
r <- content(response)
r
}
getNotionData(NOTION_TOKEN, DATABASE_ID)
NOTION_TOKEN <- 'Bearer secret_POUaRQGYgl53hlYesU7CC0kfKpgNGFTZSryH2gAUjui' # Наш скопированный токен.
DATABASE_ID <- "3f84aa11891d4cd8963dc1b577a248bb" # ваш код базы данных
base_url <- "https://api.notion.com/v1/" # сслыка notion api
url <- paste0("https://api.notion.com/v1/databases/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
NOTION_TOKEN <- 'Bearer secret_POUaRQGYgl53hlYesU7CC0kfKpgNGFTZSryH2gAUjui' # Наш скопированный токен.
DATABASE_ID <- "3f84aa11891d4cd8963dc1b577a248bb" # ваш код базы данных
DATABASE_ID <- "3f84aa11891d4cd8963dc1b577a248bb" # ваш код базы данных
url <- paste0("https://api.notion.com/v1/databases/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
url <- paste0("https://api.notion.com/v1/database/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
url <- paste0("https://api.notion.com/v1/pages/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
NOTION_TOKEN <- 'secret_POUaRQGYgl53hlYesU7CC0kfKpgNGFTZSryH2gAUjui' # Наш скопированный токен.
url <- paste0("https://api.notion.com/v1/databases/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
url <- paste0("https://api.notion.com/v1/pages/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
url <- paste0("https://api.notion.com/v1/pages/", 'e637218bcaa741b38a91003b5ba750f4')
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
getNotionData(NOTION_TOKEN, DATABASE_ID)
N
N
N
NOTION_TOKEN <- 'secret_POUaRQGYgl53hlYesU7CC0kfKpgNGFTZSryH2gAUjui' # Наш скопированный токен.
DATABASE_ID <- "3f84aa11891d4cd8963dc1b577a248bb" # ваш код базы данных
base_request <- request(base_url) %>%
req_headers(Notion-Version = '2022-06-28',
base_request %>%
req_url_path_append("pages") %>%
req_url_path_append(DATABASE)
resp <- req_perform(req)
library(magrittr)
library(telegram.bot)
library(httr2)
library(stringr)
base_request <- request(base_url) %>%
req_headers(Notion-Version = '2022-06-28',
base_request %>%
req_url_path_append("pages") %>%
req_url_path_append(DATABASE)
resp <- req_perform(req)
resp_content_type(req_perform(req))
#> [1] "text/html"
resp_status_desc(req_perform(req))
#> [1] "OK"
resp_body_html(req_perform(req))
getNotionData(NOTION_TOKEN, DATABASE_ID)
content(response)
url <- paste0("https://api.notion.com/v1/pages/", '3f84aa11891d4cd8963dc1b577a248bb')
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
url <- paste0("https://api.notion.com/v1/pages/", 'Database-3f84aa11891d4cd8963dc1b577a248bb')
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
url <- paste0("https://api.notion.com/v1/pages/", '3f84aa11891d4cd8963dc1b577a248bb')
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
NOTION_TOKEN <- 'secret_XBU22OrniqpqrEcTIauNH0WN1eOTEscF6mohVdkBX9t' # Наш скопированный токен.
url <- paste0("https://api.notion.com/v1/pages/", '3f84aa11891d4cd8963dc1b577a248bb')
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
url <- paste0("https://api.notion.com/v1/databases/", '3f84aa11891d4cd8963dc1b577a248bb')
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
pages
url <- paste0("https://api.notion.com/v1/pages/", '3f84aa11891d4cd8963dc1b577a248bb')
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
content(response)
content(response)
body <- content(response)
body %>% View()
DATABASE_ID <- "d19d2b77917c444bb477097bbf4f7cd0" # ваш код базы данных
DATABASE_ID <- "d19d2b77917c444bb477097bbf4f7cd0" # ваш код базы данных
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
body <- content(response)
body %>% View()
content(response)
url <- paste0("https://api.notion.com/v1/pages/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
body <- content(response)
body %>% View()
url <- paste0("https://api.notion.com/v1/databases/", DATABASE_ID)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
body <- content(response)
body %>% View()
# создаём экземпляр бота
bot <- Bot(token = Sys.getenv("R_TELEGRAM_BOT_my_life"))
Sys.getenv("R_TELEGRAM_BOT_my_life")
body %>% View()
body
cat(body)
body
cat(
)
cat(body)
cat(body)
body
## 1.1: Создаем путь ----
url <- paste0("https://api.notion.com/v1/databases/", tasks_id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
body <- content(response)
cat(body)
body
body %>% View()
## 1.1: Создаем путь ----
url <- paste0("https://api.notion.com/v1/databases/", tasks_id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
## 1.1: Создаем путь ----
url <- paste0("https://api.notion.com/v1/databases/", tasks_id)
tasks_id <- '62b6ef37-c605-4cc0-bb33-cd5375b8efe8'
## 1.1: Создаем путь ----
url <- paste0("https://api.notion.com/v1/databases/", tasks_id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
body <- content(response)
body %>% View()
tasks_id <- '62b6ef37-c605-4cc0-bb33-cd5375b8efe8'
## 1.1: Создаем путь ----
url <- paste0("https://api.notion.com/v1/databases/", tasks_id)
response <- httr::VERB("GET", url,
add_headers("Notion-Version" = '2022-06-28', Authorization = paste0('Bearer ', NOTION_TOKEN)),
content_type("application/octet-stream"),
accept("application/json"))
body <- content(response)
body %>% View()
